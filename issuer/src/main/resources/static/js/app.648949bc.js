(function(t){function e(e){for(var a,r,i=e[0],c=e[1],l=e[2],d=0,f=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&f.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},s={app:0},o=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),s=n.n(a);s.a},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},16:function(t,e){},17:function(t,e){},18:function(t,e){},19:function(t,e){},"1e55":function(t,e,n){},2:function(t,e){},20:function(t,e){},21:function(t,e){},22:function(t,e){},23:function(t,e){},24:function(t,e){},25:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=(n("d3b7"),n("bc3a")),o=n.n(s),r={},i=o.a.create(r);i.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),i.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t,e){t.axios=i,window.axios=i,console.log(e),Object.defineProperties(t.prototype,{axios:{get:function(){return i}},$axios:{get:function(){return i}}})},a["default"].use(Plugin);Plugin;var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},l=[],u=(n("034f"),n("2877")),d={},f=Object(u["a"])(d,c,l,!1,null,null,null),p=f.exports,m=n("8c4f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"homepage"},[n("NavBar"),n("el-carousel",{staticClass:"carousel",attrs:{height:"460px"}},t._l(t.carouselImgs,(function(t,e){return n("el-carousel-item",{key:e},[n("img",{staticStyle:{width:"1500px"},attrs:{src:t.url,alt:""}})])})),1),n("el-row",{staticStyle:{"margin-left":"9%","margin-right":"9%"},attrs:{gutter:30}},[0==t.entities.length?n("el-col",{},[n("el-empty",{attrs:{description:"暂无数据"}})],1):t._l(t.entities,(function(e,a){return n("el-col",{key:a,staticClass:"card-col",attrs:{span:8}},[n("el-card",{staticStyle:{"border-radius":"25px"}},[n("el-image",{attrs:{src:t.demoImgUrl}},[n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline"})])]),n("div",{staticStyle:{padding:"10px"}},[n("div",{staticStyle:{"text-align":"left",overflow:"hidden"}},[n("h4",[t._v("DID:"),n("span",{staticClass:"asset-discription"},[t._v(t._s(e.did))])]),n("h4",[t._v("ID:"),n("span",{staticClass:"asset-discription"},[t._v(t._s(e.id))])]),n("h4",[t._v("Name:"),n("span",{staticClass:"asset-discription"},[t._v(t._s(e.name))])]),n("h4",[t._v("Owner:"),n("span",{staticClass:"asset-discription"},[t._v(t._s(e.owner))])]),n("h4",[t._v("Price:"),n("span",{staticClass:"asset-discription"},[t._v(t._s(e.price?e.price:"N/A"))])]),n("h4",[t._v("IPFShash:"),n("span",{staticClass:"asset-discription"},[t._v(t._s(e.ipfs))])])]),n("div",{staticClass:"bottom clearfix"},[n("el-button",{staticClass:"button",attrs:{type:"success",icon:"el-icon-search"},on:{click:function(n){return t.getIPFS(e.ipfs)}}},[t._v("IPFS")]),n("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(n){return t.buyAsset(e.id)}}},[t._v("购买它")])],1)])],1)],1)}))],2),n("Footer")],1)},g=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-header"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":this.getActiveIndex,mode:"horizontal","background-color":"#fdfbfb","text-color":"#000","active-text-color":"#000",router:""},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"/"}},[a("img",{staticStyle:{height:"55px",width:"55px"},attrs:{src:n("6346"),alt:""}}),t._v(" DID-Asseets ")]),a("el-menu-item",{attrs:{index:"/marketplace"}},[t._v("MarketPlace")]),a("el-menu-item",{attrs:{index:"/assetpublish"}},[t._v("AssetPublish")]),t.metamaskEnabled()?a("el-button",{staticStyle:{"margin-top":"8px",float:"right"},attrs:{round:"",type:"info",disabled:""}},[t._v("已连接MetaMask ")]):a("el-button",{staticStyle:{"margin-top":"8px",float:"right"},attrs:{round:"",type:"primary"},on:{click:t.enableMetamask}},[t._v("连接MetaMask ")])],1)],1)},b=[],w=n("5530"),x=n("2f62"),y={data:function(){return{}},computed:Object(w["a"])(Object(w["a"])({},Object(x["c"])(["activeIndex"])),Object(x["b"])(["getActiveIndex"])),methods:{metamaskEnabled:function(){var t=window,e=t.ethereum;return e&&e.isMetaMask},enableMetamask:function(){if(this.metamaskEnabled()){var t=window,e=t.ethereum;e.request({method:"eth_requestAccounts"})}else this.$message.error("您的浏览器暂未安装metamask插件")},handleSelect:function(t,e){console.log(t,e),"/"==t||"#"==t?this.$store.commit("updateActiveIndex","/index"):this.$store.commit("updateActiveIndex",t)}}},_=y,k=(n("f1b7"),Object(u["a"])(_,v,b,!1,null,"b5c951d8",null)),S=k.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-light",staticStyle:{"z-index":"-100"}},[a("el-row",{attrs:{gutter:20,align:"center"}},[a("el-col",{attrs:{span:4,offset:1}},[a("img",{staticClass:"footer-img",attrs:{src:n("78c3"),alt:""}})]),a("el-col",{attrs:{span:16,offset:2}},[a("el-row",{attrs:{type:"flex",justify:"center",gutter:50}},[a("el-col",{staticClass:"vertical-center "},[a("router-link",{staticClass:"link-style",attrs:{to:"#"}},[a("p",[t._v("关于我们")])])],1),a("el-col",{staticClass:"vertical-center "},[a("router-link",{staticClass:"link-style",attrs:{to:"#"}},[a("p",[t._v("隐私策略")])])],1),a("el-col",{staticClass:"vertical-center "},[a("router-link",{staticClass:"link-style",attrs:{to:"#"}},[a("p",[t._v("帮助中心")])])],1)],1),a("el-row",[a("p",[t._v("Region Copyright © 2022 JNU All Rights Reserved.")])])],1)],1)],1)},C=[],O={name:"Footer"},j=O,A=(n("74cf"),Object(u["a"])(j,I,C,!1,null,"7c905ccc",null)),P=A.exports,M=n("2c82"),F=n("5184"),N=new M["a"]({uri:"https://api.thegraph.com/subgraphs/name/jntmkk/dam3"}),$="\n    query MyQuery {\n        assetEntities {\n            did\n            id\n            name\n            owner\n            price\n            url\n            ipfs\n        }\n    }\n";function D(){return N.query({query:Object(F["a"])($)})}var q=n("99e5"),z=n.n(q),E={name:"Macketpalce",data:function(){return{carouselImgs:[{caption:"carouse-2",url:n("70ae")},{caption:"carouse-3",url:n("673f")},{caption:"carouse-4",url:n("8453")}],entities:[{did:"did:dns:example.com",id:"0x0698a219f013cd9d3b6a5c2b6f633d4ae07282cf",name:"example.com domain",owner:"0x8db58193c03fe7e5d2d2ab9bf1c80f847c706743",price:null,url:"https://dam.whh.pw//api/asset/valid?id=example.com",ipfs:"QmTaq2X243Wn3vAydoEjPHeFccLBYGYR9LEuYcnN7CQDKv"}],msg:"enable metamask",currentDate:new Date,demoImgUrl:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fp5.itc.cn%2Fimages01%2F20210506%2Fa8181137567e4fe99e49cf34fc968387.jpeg&refer=http%3A%2F%2Fp5.itc.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1651634552&t=a3d21b8e08faa20460acac5311874469"}},components:{NavBar:S,Footer:P},methods:{checkmetamask:function(){var t=window,e=t.ethereum;e&&e.isMetaMask?(console.log("connect"),this.msg="Connect",e.request({method:"eth_requestAccounts"})):this.msg="Click here to install MetaMask!"},buyAsset:function(t){var e=this,n=window,a=n.ethereum;a&&a.isMetaMask?(console.log("connect"),this.msg="Connect",a.request({method:"eth_requestAccounts"}),o.a.get("https://whh.buzz/AssetDemo.json").then((function(n){console.log(t),console.log(n.data);var s=n.data;console.log(s);var o=new z.a(a),r=new o.eth.Contract(s,t);console.log(s);var i={from:a.selectedAddress};r.methods.buy().send(i).then((function(t){return e.$message({message:JSON.parse(t),showClose:!0,duration:1e3})})).catch((function(t){e.$message.error(t)}))}))):this.msg="Click here to install MetaMask!"},getIPFS:function(t){var e="https://ipfs.io/ipfs/"+t;console.log(e),window.open(e)}},mounted:function(){var t=this;D().then((function(e){console.log(e),t.entities=e.data.assetEntities}))}},J=E,R=(n("af07"),Object(u["a"])(J,h,g,!1,null,"27650d50",null)),U=R.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"homepage"},[a("div",{staticClass:"nav-header"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#fdfbfb","text-color":"#000","active-text-color":"#000",router:""},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"/"}},[a("img",{staticStyle:{height:"55px",width:"55px"},attrs:{src:n("6346"),alt:""}}),t._v(" DID-Asseets ")]),a("el-menu-item",{attrs:{index:"/marketplace"}},[t._v("MarketPlace")]),a("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"/assetpublish"}},[t._v("个人中心")])],1)],1),a("h1",[t._v("我的资产")]),a("el-table",{staticStyle:{"margin-left":"10%",width:"80%"},attrs:{data:t.tableData,height:"250"}},[a("el-table-column",{attrs:{fixed:"",prop:"did",label:"DID"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{label:"状态"}},[t._v(" 有效 ")]),a("el-table-column",{attrs:{label:"已上链"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(null==e.row.ipfs?"否":"是"))]}}])}),a("el-table-column",{attrs:{prop:"operate",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.canOperate(e)?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return t.handleRegitry(e)}}},[t._v("上链")]):a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return t.handleIPFS(e)}}},[t._v("查看IPFS")])]}}])})],1),a("Footer")],1)},B=[],L=(n("b0c0"),{name:"Macketpalce",data:function(){return{tableData:[{did:"did:dns:example.com",name:"domain example.com",url:"https://dam.whh.pw//api/asset/valid?id=example.com",ipfs:null,address:null}]}},components:{Footer:P},mounted:function(){var t=this,e="https://whh.buzz/api/asset/all";console.log("url: ",e);var n={headers:{"Access-Control-Allow-Origin":"*"}};o.a.get(e,n).then((function(e){console.log("res data: ",e.data),t.tableData=e.data}))},methods:{handleRegitry:function(t){var e=this;console.log(t);var n=window,a=n.ethereum;a&&a.isMetaMask&&(console.log("connect"),this.msg="Connect",a.request({method:"eth_requestAccounts"}),o.a.get("https://whh.buzz/Registry.json").then((function(n){var s=n.data;console.log("上链ABI：",s);var r=new z.a(a),i="0xbA1F26A9fea115388E19Cfbd410cbc2DB0487249",c=new r.eth.Contract(s,i),l={from:a.selectedAddress};console.log("scope.row:",t.row);var u="https://whh.buzz/api/asset/did",d={did:t.row.did,name:t.row.name,url:t.row.url},f={headers:{"Content-Type":"application/json;charset=UTF-8"}};o.a.post(u,JSON.stringify(d),f).then((function(n){var s;console.log("getIPFSHash: ",n),console.log("getIPFSHash: ",n.data);var o=n.data,r=[t.row.did,a.selectedAddress,t.row.url,t.row.name,o];(s=c.methods).create.apply(s,r).send(l).then((function(t){return e.$message({message:JSON.parse(t),showClose:!0,duration:1e3})})).catch((function(t){e.$message.error(t)}))})).catch((function(t){e.$message.error(t)}))})))},canOperate:function(t){return console.log(t.row.ipfs),null==t.row.ipfs},handleSelect:function(t,e){console.log(t,e),"/"==t||"#"==t?this.$store.commit("updateActiveIndex","/index"):this.$store.commit("updateActiveIndex",t)},handleIPFS:function(t){console.log(t.row);var e="https://ipfs.io/ipfs/"+t.row.ipfs;console.log(e),window.open(e)}}}),H=L,Q=Object(u["a"])(H,T,B,!1,null,"04997ef4",null),Y=Q.exports;a["default"].use(m["a"]);var G=[{path:"/",name:"marketpalce",alias:"/marketplace",component:U},{name:"assetpublish",path:"/assetpublish",component:Y}],K=new m["a"]({routes:G}),W=K;a["default"].use(x["a"]);var X=new x["a"].Store({state:{userName:"",activeIndex:"/marketplace",subPath:"/api"},mutations:{updateUserInfo:function(t,e){t.userName=e},updateActiveIndex:function(t,e){t.activeIndex=e}},getters:{getUserName:function(t){return t.userName?t.userName:sessionStorage.getItem("userName")},getActiveIndex:function(t){return t.activeIndex?t.activeIndex:sessionStorage.getItem("activeIndex")}}}),V=n("5c96"),Z=n.n(V);n("f843");a["default"].use(Z.a),a["default"].config.productionTip=!1,new a["default"]({router:W,store:X,mounted:function(){var t=this;sessionStorage.getItem("store")&&this.$store.replaceState(Object.assign({},this.$store.state,JSON.parse(sessionStorage.getItem("store")))),window.addEventListener("beforeunload",(function(){sessionStorage.setItem("store",JSON.stringify(t.$store.state)),sessionStorage.setItem("nickName",JSON.stringify(t.$store.state.nickName)),sessionStorage.setItem("activeIndex",JSON.stringify(t.$store.state.activeIndex))}))},render:function(t){return t(p)}}).$mount("#app")},6:function(t,e){},6346:function(t,e,n){t.exports=n.p+"img/wormholeLogo.4713e584.png"},"673f":function(t,e,n){t.exports=n.p+"img/carousel-3.9d7ed001.jpg"},7:function(t,e){},"70ae":function(t,e,n){t.exports=n.p+"img/carousel-2.773dc658.jpg"},"74cf":function(t,e,n){"use strict";var a=n("96b7"),s=n.n(a);s.a},"78c3":function(t,e,n){t.exports=n.p+"img/JNUlogo.ec101ae8.png"},8:function(t,e){},8453:function(t,e,n){t.exports=n.p+"img/carousel-4.655f6771.jpg"},"85ec":function(t,e,n){},9:function(t,e){},"96b7":function(t,e,n){},af07:function(t,e,n){"use strict";var a=n("f6f7"),s=n.n(a);s.a},f1b7:function(t,e,n){"use strict";var a=n("1e55"),s=n.n(a);s.a},f6f7:function(t,e,n){},f843:function(t,e,n){}});
//# sourceMappingURL=app.648949bc.js.map